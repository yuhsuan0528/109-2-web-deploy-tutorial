# 109-2 Web Final Project

我們這組做的是桌遊「阿瓦隆」的線上版。遊戲分成兩方，正方的主要目的就是要在五次機會中成功出三次任務，而反方則是要阻撓正方完成，或在正方完成三次任務時刺殺正方首領「梅林」。

詳細規則請參考： https://andyventure.com/boardgame-avalon/

以下為我們所實作的功能：

## 使用技術

- 前端：使用 React.js
- 後端：使用 Node.js
- 資料庫：使用 MongoDB，搭配 MongoDB Atlas
- 第三方套件、框架、程式碼：antd、GraphQL、Apollo、React-animejs

## 登入畫面

1. 輸入暱稱，按下 "Sign in" 或 Enter 鍵即可加入遊戲大廳。
2. 下次進入登入畫面時，會自動填入上次輸入的暱稱。

## 遊戲大廳

1. 進入遊戲大廳可以建立新房間、搜尋房間或顯示所有房間。
2. 按下顯示所有房間，即可看到目前在 MongoDB Atlas 存在的所有房間。
3. 若已知房間名可以搜尋房間。
4. 建立房間會開啟一個視窗，此視窗會要求使用者輸入房間名、選擇遊戲人數，也可以選擇使用密碼，則之後加入房間的玩家都必須輸入密碼才能進入。

## 遊戲準備畫面

1. 進入房間後，左邊會顯示目前的玩家數目，右邊則會顯示此次遊戲會出現的角色。
2. 建立房間的玩家會成為房長，有權力關閉房間及開始遊戲。
3. 當房間人數達到遊戲需要的人數後，房長即可按下「開始遊戲」。
4. 遊戲左下可以看到「目前任務情況」及「投票失敗數」，右下角則是聊天室，提供全房的文字訊息交流。
5. 玩家可在右上角看到「離開房間」、房長則可以「關閉房間」，按下後會跳出確認視窗確認後可離開/關閉房間。

## 遊戲進行畫面

1. 開始遊戲後，每個人會隨機分配到角色，也會根據自己的身份能夠看到某些玩家的角色。
2. 每回合遊戲總共有「派人」、「投票」、「出任務」三個階段。
3. 派人：此時畫面左上角色卡底下（若七人以上則在右側，下同）會顯示前一回合的投票結果，以及該回合的隊長。此時隊長的畫面右上角會出現徽章，隊長要點選左側角色牌將其分派給玩家以出隊。其他玩家的畫面會指示使用者等候。
4. 投票：此時畫面左上角色卡底下會顯示隊長選擇的隊員，右上則會有同意、反對可以選擇。等全體玩家投票結束後，若同意票大於反對票，則進入出任務，否則左下角「投票失敗數」加一，進入下一輪派人。
5. 出任務：此時畫面左上角色卡底下會顯示本回合的投票結果，被選中的隊員右上角會出現任務成功與失敗可以選擇。只要出現任何一張失敗票（除第四回合為兩張），則本次任務失敗，左下角多一個紅色標記，反之則成功，左下角出現藍色標記。
6. 任一回合只要累積的「投票失敗數」達到五，反方立即獲勝。每出完任務歸零一次。
7. 當五回合內任務成功三次，則進入「刺殺」的階段。反方的刺客右上角會提示玩家進行刺殺。刺客玩家從左上角色卡片中間點選一位玩家刺殺。若被刺玩家為梅林，則反方獲勝，反之正方獲勝。
8. 若任務失敗三次則反方獲勝。

## 遊戲結束畫面

1. 右上角會有動畫顯示正方獲勝或反方獲勝。
2. 房長可以按「開始遊戲」再開始新的一局。